import{Y as W,x as ue,j as e,ac as ge,aK as Q,aB as Me,B as P,m as h,T as Re,a6 as Te,l as Ve,w as qe,aL as Ge,r as j,y as E,aJ as ie,z as O,af as Be,a9 as He,n as Je,X as T,G as A,W as D,ak as Ke,M as o,N as V,O as q,Q as G,U as B,V as H,I as b,aH as ne,aa as oe,aM as Ze,J,K,_ as Z,ae as ce,ar as Qe,aI as de,a1 as We,a2 as Xe,a3 as Ye,a4 as es,aN as ss}from"./index-1760862795448.js";import{U as me}from"./user-check-1760862795448.js";import{S as ts}from"./save-1760862795448.js";import{U as he}from"./upload-1760862795448.js";import{I as xe}from"./info-1760862795448.js";const rs=W("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),as=W("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),ls=W("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),is=({participants:u=[],showRemoveButton:p=!1,onRemoveParticipant:g=null,onParticipantClick:X=null,onEditRanking:Y=null,compact:F=!1})=>{const{isAdmin:$}=ue();if(u.length===0)return e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(ge,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Aucun participant inscrit."})]});const S=u.filter(a=>a.role==="Competiteur"),_=u.filter(a=>a.role==="Arbitre"),y=u.filter(a=>a.role==="Coach"),C=u.filter(a=>a.role!=="Competiteur"&&a.role!=="Arbitre"&&a.role!=="Coach"),d=(a=>{const c={femmes:{},hommes:{},inconnu:{}};return a.forEach(n=>{if(!n.members)return;let f;n.members.sexe==="F"?f="femmes":n.members.sexe==="H"?f="hommes":f="inconnu";const t=n.members.category||"Sans catégorie";c[f][t]||(c[f][t]=[]),c[f][t].push(n)}),c})(S),v=({participant:a,showRemove:c})=>a.members?(a.role,e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 hover:bg-muted/30 transition-colors group border-b border-muted/30 last:border-b-0",children:[e.jsx("div",{className:"flex items-center gap-3 flex-1",children:e.jsx("span",{className:"text-sm font-medium",children:Me(a.members.first_name,a.members.last_name,$)})}),e.jsxs("div",{className:"flex items-center gap-2 pointer-events-auto",children:[a.members.licence&&e.jsxs(P,{variant:"secondary",className:"text-xs pointer-events-none",children:["Licence: ",a.members.licence]}),a.ranking&&e.jsxs(P,{variant:"secondary",className:"text-xs pointer-events-none",children:["#",a.ranking,a.nb_competitor&&` / ${a.nb_competitor}`]}),c&&g&&e.jsx(h,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),g(a.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Re,{className:"w-4 h-4 text-destructive"})})]})]})):e.jsx("div",{className:"text-sm text-muted-foreground py-1",children:"Membre introuvable"});return e.jsxs("div",{className:"space-y-4",children:[S.length>0&&e.jsxs("div",{children:[e.jsxs("h5",{className:`font-medium mb-3 text-primary flex items-center gap-2 ${F?"text-sm":""}`,children:[e.jsx(Q,{className:"w-4 h-4"}),"Compétiteurs (",S.length,")"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-semibold text-pink-700 mb-2 flex items-center gap-1 border-b border-pink-200 pb-1",children:["👩 Filles (",Object.values(d.femmes).flat().length,")"]}),Object.keys(d.femmes).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(d.femmes).map(([a,c])=>e.jsxs("div",{className:"border rounded-lg p-2 bg-pink-50",children:[e.jsxs("div",{className:"text-xs font-medium text-pink-600 mb-1",children:[a," (",c.length,")"]}),e.jsx("div",{className:"space-y-0",children:c.map(n=>e.jsx(v,{participant:n,showRemove:p},n.id))})]},`f-${a}`))}):e.jsx("div",{className:"text-sm text-muted-foreground italic",children:"Aucune fille inscrite"})]}),e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-semibold text-blue-700 mb-2 flex items-center gap-1 border-b border-blue-200 pb-1",children:["👨 Garçons (",Object.values(d.hommes).flat().length,")"]}),Object.keys(d.hommes).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(d.hommes).map(([a,c])=>e.jsxs("div",{className:"border rounded-lg p-2 bg-blue-50",children:[e.jsxs("div",{className:"text-xs font-medium text-blue-600 mb-1",children:[a," (",c.length,")"]}),e.jsx("div",{className:"space-y-0",children:c.map(n=>e.jsx(v,{participant:n,showRemove:p},n.id))})]},`h-${a}`))}):e.jsx("div",{className:"text-sm text-muted-foreground italic",children:"Aucun garçon inscrit"})]})]})]}),(_.length>0||y.length>0)&&e.jsxs("div",{children:[e.jsxs("h5",{className:`font-medium mb-3 text-green-700 flex items-center gap-2 ${F?"text-sm":""}`,children:[e.jsx(me,{className:"w-4 h-4"}),"Encadrement (",_.length+y.length,")"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-semibold text-purple-700 mb-2 flex items-center gap-1 border-b border-purple-200 pb-1",children:["🏃‍♀️ Coaches (",y.length,")"]}),y.length>0?e.jsx("div",{className:"border rounded-lg bg-purple-50",children:y.map(a=>e.jsx(v,{participant:a,showRemove:p},a.id))}):e.jsx("div",{className:"text-sm text-muted-foreground italic",children:"Aucun coach inscrit"})]}),e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-semibold text-blue-700 mb-2 flex items-center gap-1 border-b border-blue-200 pb-1",children:["⚖️ Arbitres (",_.length,")"]}),_.length>0?e.jsx("div",{className:"border rounded-lg bg-blue-50",children:_.map(a=>e.jsx(v,{participant:a,showRemove:p},a.id))}):e.jsx("div",{className:"text-sm text-muted-foreground italic",children:"Aucun arbitre inscrit"})]})]})]}),C.length>0&&e.jsxs("div",{children:[e.jsxs("h5",{className:`font-medium mb-3 text-green-700 flex items-center gap-2 ${F?"text-sm":""}`,children:[e.jsx(me,{className:"w-4 h-4"}),"Autre Encadrement (",C.length,")"]}),e.jsx("div",{className:"border rounded-lg",children:C.map(a=>e.jsx(v,{participant:a,showRemove:p},a.id))})]})]})},hs=()=>{const{id:u}=Te(),p=Ve(),{toast:g}=qe(),{showMemberDetails:X}=Ge(),{isAdmin:Y,isBureau:F,isEncadrant:$}=ue(),S=Y||F||$,[_,y]=j.useState(!0),[C,z]=j.useState(!1),[d,v]=j.useState(!1),[a,c]=j.useState(!1),[n,f]=j.useState(null),[t,N]=j.useState(null),[ee,pe]=j.useState([]),[k,je]=j.useState({main:null,gallery:[]}),[w,U]=j.useState({isOpen:!1,photos:[],currentIndex:0,competitionName:""}),fe=["Départemental","Régional","Inter-régional","National","International"],be=["Contest","Open","Coupe","Championnat"],ve=["Bloc","Difficulté","Vitesse","Combiné"],Ne=["U11","U13","U15","U17","U19","Sénior","Vétéran"],ye=["À venir","En cours","Clos"],se=j.useCallback(async()=>{y(!0);try{const{data:s,error:r}=await E.from("competitions").select("*").eq("id",u).single();if(r)throw r;f(s),N({...s,disciplines:s.disciplines||[],categories:s.categories||[],photo_gallery:s.photo_gallery||[]});const i=s.image_url?await ie(s.image_url):null,m=s.photo_gallery?await Promise.all(s.photo_gallery.map(M=>ie(M))):[];je({main:i,gallery:m.filter(Boolean)});const{data:I,error:ae}=await E.from("competition_participants").select("*").eq("competition_id",u).order("role").order("created_at");if(ae)throw ae;if(I&&I.length>0){const M=[...new Set(I.map(L=>L.member_id))],{data:R,error:le}=await E.from("secure_members").select("*").in("id",M);if(le)throw le;const $e=I.map(L=>({...L,members:(R==null?void 0:R.find(ze=>ze.id===L.member_id))||null}));pe($e)}}catch(s){console.error("Error loading competition:",s),g({title:"Erreur",description:"Impossible de charger la compétition.",variant:"destructive"}),p("/competitions")}finally{y(!1)}},[u,p,g]);j.useEffect(()=>{se()},[se]);const x=(s,r)=>{N(i=>({...i,[s]:r}))},we=s=>{N(r=>({...r,disciplines:r.disciplines.includes(s)?r.disciplines.filter(i=>i!==s):[...r.disciplines,s]}))},_e=s=>{N(r=>({...r,categories:r.categories.includes(s)?r.categories.filter(i=>i!==s):[...r.categories,s]}))},Ce=async s=>{var i;const r=(i=s.target.files)==null?void 0:i[0];if(r){c(!0);try{const m=await ne(r,t.name);if(!m.success)throw new Error(m.error);N(I=>({...I,photo_gallery:[...I.photo_gallery,m.url]})),g({title:"Succès",description:`Photo "${r.name}" ajoutée à la galerie !`,variant:"default"}),s.target.value=""}catch(m){console.error("Erreur lors de l'upload:",m),g({title:"Erreur",description:`Impossible d'uploader la photo: ${m.message}`,variant:"destructive"}),s.target.value=""}finally{c(!1)}}},ke=s=>{N(r=>({...r,photo_gallery:r.photo_gallery.filter((i,m)=>m!==s)}))},Ie=()=>{const s=prompt("URL de la photo:");if(s){const r=new URL(s).pathname.split("/").pop();N(i=>({...i,photo_gallery:[...i.photo_gallery,r]}))}},Pe=async()=>{z(!0);try{const s={name:t.name||"",short_title:t.short_title||"",start_date:t.start_date||"",end_date:t.end_date||null,location:t.location||"",prix:t.prix?parseFloat(t.prix):null,niveau:t.niveau||null,nature:t.nature||null,disciplines:Array.isArray(t.disciplines)&&t.disciplines.length>0?t.disciplines:[],categories:Array.isArray(t.categories)&&t.categories.length>0?t.categories:[],more_info_link:t.more_info_link||null,details_description:t.details_description||null,details_format:t.details_format||null,details_schedule:t.details_schedule||null,image_url:t.image_url||null,photo_gallery:Array.isArray(t.photo_gallery)&&t.photo_gallery.length>0?t.photo_gallery:[]},{error:r}=await E.from("competitions").update(s).eq("id",u);if(r)throw r;g({title:"Succès",description:"Compétition modifiée avec succès !",variant:"default"}),f({...n,...s}),v(!1)}catch(s){console.error("Erreur lors de la sauvegarde:",s),g({title:"Erreur",description:`Impossible de sauvegarder: ${s.message||"Erreur inconnue"}`,variant:"destructive"})}finally{z(!1)}},Se=()=>{N({...n,disciplines:n.disciplines||[],categories:n.categories||[],photo_gallery:n.photo_gallery||[]}),v(!1)},te=(s,r,i=0)=>{U({isOpen:!0,photos:s,currentIndex:i,competitionName:r})},re=()=>{U({isOpen:!1,photos:[],currentIndex:0,competitionName:""})},Fe=()=>{U(s=>({...s,currentIndex:(s.currentIndex+1)%s.photos.length}))},Ee=()=>{U(s=>({...s,currentIndex:s.currentIndex===0?s.photos.length-1:s.currentIndex-1}))},Ae=s=>({Bloc:"bg-purple-100 text-purple-700 border-purple-200",Difficulté:"bg-red-100 text-red-700 border-red-200",Vitesse:"bg-blue-100 text-blue-700 border-blue-200",Combiné:"bg-orange-100 text-orange-700 border-orange-200"})[s]||"bg-gray-100 text-gray-700 border-gray-200",De=s=>({Contest:"bg-green-100 text-green-700 border-green-200",Open:"bg-blue-100 text-blue-700 border-blue-200",Coupe:"bg-yellow-100 text-yellow-700 border-yellow-200",Championnat:"bg-red-100 text-red-700 border-red-200"})[s]||"bg-gray-100 text-gray-700 border-gray-200",Ue=s=>({Départemental:"bg-green-100 text-green-700 border-green-200",Régional:"bg-blue-100 text-blue-700 border-blue-200","Inter-régional":"bg-purple-100 text-purple-700 border-purple-200",National:"bg-red-100 text-red-700 border-red-200",International:"bg-orange-100 text-orange-700 border-orange-200"})[s]||"bg-gray-100 text-gray-700 border-gray-200",Le=s=>({"À venir":"bg-blue-100 text-blue-700 border-blue-300","En cours":"bg-green-100 text-green-700 border-green-300",Clos:"bg-gray-100 text-gray-700 border-gray-300"})[s]||"bg-gray-100 text-gray-700 border-gray-200",Oe=async s=>{try{const{error:r}=await E.from("competitions").update({status:s}).eq("id",u);if(r)throw r;f(i=>({...i,status:s})),N(i=>({...i,status:s})),g({title:"Statut modifié",description:`Le statut de la compétition a été changé en "${s}".`,variant:"default"})}catch(r){console.error("Erreur lors de la modification du statut:",r),g({title:"Erreur",description:`Impossible de modifier le statut: ${r.message}`,variant:"destructive"})}};if(_)return e.jsx("div",{className:"flex justify-center items-center py-16",children:e.jsx(O,{className:"w-12 h-12 animate-spin text-primary"})});if(!n||!t)return null;const l=d?t:n;return e.jsx(Be,{requireAdherent:!0,pageTitle:"Détail de la compétition",message:"Les détails des compétitions sont réservés aux adhérents du club. Veuillez vous connecter avec un compte adhérent pour y accéder.",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(h,{variant:"outline",onClick:()=>p("/competitions"),children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Retour à la liste"]}),e.jsx("div",{className:"flex gap-2",children:S&&!d?e.jsxs(h,{onClick:()=>v(!0),className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Éditer"]}):S&&d?e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"outline",onClick:Se,disabled:C,children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Annuler"]}),e.jsxs(h,{onClick:Pe,disabled:C,children:[C?e.jsx(O,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(ts,{className:"w-4 h-4 mr-2"}),"Sauvegarder"]})]}):null})]}),e.jsx(A,{className:"border-2",children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"w-5 h-5 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Statut de la compétition:"}),e.jsx(P,{variant:"outline",className:`text-base px-4 py-1 ${Le(l.status||"À venir")}`,children:l.status||"À venir"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{htmlFor:"status-select",className:"text-sm text-muted-foreground",children:"Changer le statut:"}),e.jsxs(V,{value:l.status||"À venir",onValueChange:Oe,children:[e.jsx(q,{id:"status-select",className:"w-[160px]",children:e.jsx(G,{})}),e.jsx(B,{children:ye.map(s=>e.jsx(H,{value:s,children:s},s))})]})]})]})})}),e.jsx(A,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[k.main&&e.jsx("div",{className:"w-full md:w-48 h-48 flex-shrink-0",children:e.jsx("img",{src:k.main,alt:l.name,className:"w-full h-full object-cover rounded-lg border"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",children:"Nom de la compétition *"}),e.jsx(b,{id:"name",value:t.name,onChange:s=>x("name",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"short_title",children:"Titre court"}),e.jsx(b,{id:"short_title",value:t.short_title,onChange:s=>x("short_title",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Image principale"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{id:"image_url",type:"text",value:t.image_url||"",onChange:s=>x("image_url",s.target.value),placeholder:"Chemin de l'image"}),e.jsxs(o,{htmlFor:"main-image-upload-detail",className:`flex items-center gap-1 px-3 py-2 text-sm font-medium rounded-md border border-input bg-background hover:bg-accent hover:text-accent-foreground ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[a?e.jsx(O,{className:"w-4 h-4 animate-spin"}):e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"Choisir"}),e.jsx(b,{id:"main-image-upload-detail",type:"file",className:"sr-only",onChange:async s=>{var i;const r=(i=s.target.files)==null?void 0:i[0];if(r){c(!0);try{const m=await ne(r,t.name);if(!m.success)throw new Error(m.error);x("image_url",m.filePath),g({title:"Succès",description:"Image principale téléversée."})}catch(m){g({title:"Erreur",description:m.message,variant:"destructive"})}finally{c(!1)}}},accept:"image/*",disabled:a})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold",children:l.name}),l.short_title&&e.jsx("p",{className:"text-lg text-primary font-medium",children:l.short_title})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.niveau&&e.jsx(P,{className:Ue(l.niveau),children:l.niveau}),l.nature&&e.jsx(P,{className:De(l.nature),children:l.nature}),l.disciplines&&l.disciplines.map(s=>e.jsx(P,{className:Ae(s),children:s},s))]}),e.jsxs("div",{className:"flex flex-col gap-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsxs("span",{children:[new Date(l.start_date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),l.end_date&&l.end_date!==l.start_date&&e.jsxs(e.Fragment,{children:[" au ",new Date(l.end_date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:l.location})]}),l.prix&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-4 h-4"}),e.jsxs("span",{children:["Prix d'entrée: ",l.prix,"€"]})]})]})]})]})})}),e.jsxs(A,{children:[e.jsx(J,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5"}),"Informations détaillées"]})}),e.jsx(D,{className:"space-y-4",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"start_date",children:"Date de début *"}),e.jsx(b,{id:"start_date",type:"date",value:t.start_date,onChange:s=>x("start_date",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"end_date",children:"Date de fin"}),e.jsx(b,{id:"end_date",type:"date",value:t.end_date||"",onChange:s=>x("end_date",s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"location",children:"Lieu *"}),e.jsx(b,{id:"location",value:t.location,onChange:s=>x("location",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"prix",children:"Prix d'entrée (€)"}),e.jsx(b,{id:"prix",type:"number",step:"0.01",value:t.prix||"",onChange:s=>x("prix",s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"niveau",children:"Niveau"}),e.jsxs(V,{value:t.niveau||"",onValueChange:s=>x("niveau",s),children:[e.jsx(q,{children:e.jsx(G,{placeholder:"Sélectionner"})}),e.jsx(B,{children:fe.map(s=>e.jsx(H,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"nature",children:"Nature"}),e.jsxs(V,{value:t.nature||"",onValueChange:s=>x("nature",s),children:[e.jsx(q,{children:e.jsx(G,{placeholder:"Sélectionner"})}),e.jsx(B,{children:be.map(s=>e.jsx(H,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Disciplines"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:ve.map(s=>e.jsx(h,{variant:t.disciplines.includes(s)?"default":"outline",size:"sm",onClick:()=>we(s),children:s},s))})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Catégories"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Ne.map(s=>e.jsx(h,{variant:t.categories.includes(s)?"default":"outline",size:"sm",onClick:()=>_e(s),children:s},s))})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"more_info_link",children:"Lien pour plus d'informations"}),e.jsx(b,{id:"more_info_link",type:"url",value:t.more_info_link||"",onChange:s=>x("more_info_link",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"details_description",children:"Informations pratiques"}),e.jsx(Z,{id:"details_description",value:t.details_description||"",onChange:s=>x("details_description",s.target.value),rows:3})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"details_format",children:"Format de la compétition"}),e.jsx(Z,{id:"details_format",value:t.details_format||"",onChange:s=>x("details_format",s.target.value),rows:3})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"details_schedule",children:"Planning"}),e.jsx(Z,{id:"details_schedule",value:t.details_schedule||"",onChange:s=>x("details_schedule",s.target.value),rows:3})]})]}):e.jsxs(e.Fragment,{children:[l.details_description&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-md border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-blue-600"}),"Informations pratiques"]}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed whitespace-pre-wrap",children:l.details_description})]}),l.details_format&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-md border border-green-200",children:[e.jsxs("h5",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-green-600"}),"Format de la compétition"]}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed whitespace-pre-wrap",children:l.details_format})]}),l.details_schedule&&e.jsxs("div",{className:"p-3 bg-purple-50 rounded-md border border-purple-200",children:[e.jsxs("h5",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-purple-600"}),"Planning"]}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed whitespace-pre-wrap",children:l.details_schedule})]}),l.more_info_link&&e.jsxs("div",{className:"p-3 bg-orange-50 rounded-md border border-orange-200",children:[e.jsxs("h5",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4 text-orange-600"}),"Plus d'informations"]}),e.jsx(h,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:l.more_info_link,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),"Consulter le site officiel"]})})]}),l.categories&&l.categories.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Catégories:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:l.categories.map(s=>e.jsx(P,{variant:"outline",className:"text-xs",children:s},s))})]})]})})]}),e.jsxs(A,{children:[e.jsx(J,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5"}),"Photos ",l.photo_gallery&&l.photo_gallery.length>0&&`(${l.photo_gallery.length})`]})}),e.jsxs(D,{children:[d&&e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:Ie,children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),"Ajouter URL"]}),e.jsxs(o,{htmlFor:"photo-upload",className:`flex items-center gap-1 px-3 py-2 text-sm font-medium rounded-md border border-input bg-background hover:bg-accent hover:text-accent-foreground ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[a?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 animate-spin"}),"Upload en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4"}),"Choisir un fichier"]}),e.jsx(b,{id:"photo-upload",type:"file",className:"sr-only",onChange:Ce,accept:"image/*",disabled:a})]})]}),k.gallery&&k.gallery.length>0?e.jsxs(e.Fragment,{children:[!d&&e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>te(k.gallery,l.name,0),className:"mb-4 flex items-center gap-1",children:[e.jsx(ls,{className:"w-3 h-3"}),"Voir en grand"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:k.gallery.map((s,r)=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>!d&&te(k.gallery,l.name,r),children:[e.jsx("img",{src:s,alt:`Photo ${r+1}`,className:"w-full h-32 object-cover rounded border"}),d&&e.jsx(h,{variant:"destructive",size:"sm",className:"absolute top-1 right-1 w-6 h-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:i=>{i.stopPropagation(),ke(r)},children:e.jsx(T,{className:"w-3 h-3"})})]},r))})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune photo pour le moment."})]})]}),e.jsxs(A,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5"}),"Participants"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>p(`/competitions/participants/${u}`),className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{className:"whitespace-nowrap",children:"Modifier les participants"})]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>p(`/competitions/results/${u}`),className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{className:"whitespace-nowrap",children:"Modifier les résultats"})]})]})]})}),e.jsx(D,{children:ee.length>0?e.jsx(is,{participants:ee,onParticipantClick:X,compact:!1}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun participant pour le moment."})})]}),e.jsx(We,{open:w.isOpen,onOpenChange:re,children:e.jsxs(Xe,{className:"max-w-6xl max-h-[90vh] p-0 bg-black/95 border-0",children:[e.jsxs(Ye,{className:"absolute top-4 left-4 right-4 z-10 flex flex-row justify-between items-center text-white p-4",children:[e.jsxs(es,{className:"text-lg font-semibold text-white",children:[w.competitionName," - Photo ",w.currentIndex+1," sur ",w.photos.length]}),e.jsx(h,{variant:"ghost",size:"sm",onClick:re,className:"text-white hover:bg-white/20",children:e.jsx(T,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[e.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-16",children:e.jsx("img",{src:w.photos[w.currentIndex],alt:`Photo ${w.currentIndex+1}`,className:"max-w-full max-h-full object-contain rounded-lg"})}),w.photos.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"ghost",size:"lg",onClick:Ee,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-10",children:e.jsx(rs,{className:"w-8 h-8"})}),e.jsx(h,{variant:"ghost",size:"lg",onClick:Fe,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-10",children:e.jsx(ss,{className:"w-8 h-8"})})]})]})]})})]})})};export{hs as default};
