import{c as me,r as h,Q as ue,O as xe,u as he,t as _,j as e,U as pe,m as g,B as y,P as je,R as se,a4 as K,a5 as W,a6 as M,x as n,a7 as U,a8 as ae,C as T,b as E,d as k,Z as J,e as A,W as V,a9 as te,aa as O,ab as ie,ac as re,ad as le,D as ge,h as fe,i as ve,k as Ne,l as ye,L as o,I as B,n as $,o as H,p as G,q as Q,s as b,T as w,g as _e,$ as be,z as ce,E as ne,f as we,N as Y,a as Ce,ae as Se}from"./index-1760362772818.js";import{B as Fe}from"./book-marked-1760362772818.js";import{U as Te}from"./upload-cloud-1760362772818.js";const oe=me("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]),Z="pedagogy_files",Ee=["SÃ©curitÃ©","Noeud","Secours","Manip","Information"],de={educational_game:"Jeu Ã©ducatif",warm_up_exercise:"Exercice d'Ã©chauffement",strength_exercise:"Exercice de renfo",review_sheet:"Fiche de rÃ©vision",technical_sheet:"Fiche technique",safety_sheet:"Fiche sÃ©curitÃ©",meeting_report:"Compte rendu de rÃ©union"},X={educational_game:{icon:te,label:"Jeux Ã‰ducatifs",description:"Jeux et activitÃ©s ludiques pour l'apprentissage"},review_sheet:{icon:O,label:"Fiches de RÃ©vision",description:"Supports de rÃ©vision et mÃ©mo techniques"},technical_sheet:{icon:ie,label:"Fiches Techniques",description:"Techniques et mÃ©thodes d'escalade"},passeports:{icon:ae,label:"Passeports",description:"SystÃ¨mes de validation des compÃ©tences FFME"},strength_exercise:{icon:re,label:"Exercices de Renfo",description:"Exercices de renforcement musculaire"},warm_up_exercise:{icon:le,label:"Exercices d'Ã‰chauffement",description:"PrÃ©paration physique et mentale"},safety_sheet:{icon:oe,label:"Fiches SÃ©curitÃ©",description:"ProcÃ©dures et consignes de sÃ©curitÃ©"},meeting_report:{icon:O,label:"Comptes Rendus",description:"Comptes rendus de rÃ©unions et assemblÃ©es"}},ke=({sheet:s,onSave:f,onCancel:j,isSaving:u,existingThemes:v})=>{const[r,p]=h.useState(s||{title:"",description:"",type:"video_url",url:"",structure:"SAE",categories:[],sheet_type:"warm_up_exercise"}),[d,N]=h.useState(null);h.useEffect(()=>{s&&p({...s,categories:s.categories||[],sheet_type:s.sheet_type||"warm_up_exercise"})},[s]);const m=a=>{const{name:i,value:t}=a.target;p(l=>({...l,[i]:t}))},L=a=>{p(i=>({...i,type:a,url:""})),N(null)},D=a=>{p(i=>({...i,structure:a}))},C=a=>{p(i=>({...i,sheet_type:a}))},S=a=>{p(i=>{const t=i.categories||[],l=t.includes(a)?t.filter(c=>c!==a):[...t,a];return{...i,categories:l}})},z=a=>{a.target.files&&a.target.files[0]&&N(a.target.files[0])},q=a=>{a.preventDefault(),f(r,d)},P=r.type==="video_url"||r.type==="document_url",F=r.type==="image_file"||r.type==="document_file",R=r.sheet_type==="educational_game";return e.jsx(ge,{open:!0,onOpenChange:j,children:e.jsx(fe,{className:"sm:max-w-3xl",children:e.jsxs("form",{onSubmit:q,children:[e.jsxs(ve,{children:[e.jsx(Ne,{children:s?"Modifier la fiche":"Ajouter une fiche pÃ©dagogique"}),e.jsx(ye,{children:"Remplissez les informations ci-dessous."})]}),e.jsxs("div",{className:"grid gap-4 py-4 max-h-[70vh] overflow-y-auto pr-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"title",children:"Titre"}),e.jsx(B,{id:"title",name:"title",value:r.title,onChange:m,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"sheet_type",children:"Type de Fiche"}),e.jsxs($,{value:r.sheet_type,onValueChange:C,children:[e.jsx(H,{id:"sheet_type",children:e.jsx(G,{placeholder:"SÃ©lectionner un type de fiche"})}),e.jsx(Q,{children:Object.entries(de).map(([a,i])=>e.jsx(b,{value:a,children:i},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"type",children:"Type de MÃ©dia"}),e.jsxs($,{value:r.type,onValueChange:L,children:[e.jsx(H,{id:"type",children:e.jsx(G,{placeholder:"SÃ©lectionner un type"})}),e.jsxs(Q,{children:[e.jsx(b,{value:"video_url",children:"VidÃ©o (URL)"}),e.jsx(b,{value:"image_file",children:"Image (Fichier)"}),e.jsx(b,{value:"document_file",children:"Document (Fichier)"}),e.jsx(b,{value:"document_url",children:"Document (URL)"})]})]})]}),R?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"theme",children:"ThÃ¨me"}),e.jsx(B,{id:"theme",name:"theme",value:r.theme||"",onChange:m,list:"existing-themes",placeholder:"Choisir ou crÃ©er un thÃ¨me"}),e.jsx("datalist",{id:"existing-themes",children:v.map(a=>e.jsx("option",{value:a},a))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"starting_situation",children:"Situation de dÃ©part"}),e.jsx(w,{id:"starting_situation",name:"starting_situation",value:r.starting_situation||"",onChange:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"game_goal",children:"But du jeu"}),e.jsx(w,{id:"game_goal",name:"game_goal",value:r.game_goal||"",onChange:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"evolution",children:"Ã‰volution"}),e.jsx(w,{id:"evolution",name:"evolution",value:r.evolution||"",onChange:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"skill_to_develop",children:"CapacitÃ© Ã  dÃ©velopper"}),e.jsx(w,{id:"skill_to_develop",name:"skill_to_develop",value:r.skill_to_develop||"",onChange:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"success_criteria",children:"CritÃ¨res de rÃ©ussite"}),e.jsx(w,{id:"success_criteria",name:"success_criteria",value:r.success_criteria||"",onChange:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"remarks",children:"Remarques"}),e.jsx(w,{id:"remarks",name:"remarks",value:r.remarks||"",onChange:m})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(w,{id:"description",name:"description",value:r.description||"",onChange:m})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"structure",children:"Structure"}),e.jsxs($,{value:r.structure||"SAE",onValueChange:D,children:[e.jsx(H,{id:"structure",children:e.jsx(G,{placeholder:"SÃ©lectionner une structure"})}),e.jsxs(Q,{children:[e.jsx(b,{value:"SAE",children:"SAE"}),e.jsx(b,{value:"SNE",children:"SNE"})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"CatÃ©gories"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:Ee.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{id:`category-${a}`,checked:(r.categories||[]).includes(a),onCheckedChange:()=>S(a)}),e.jsx(o,{htmlFor:`category-${a}`,className:"font-normal",children:a})]},a))})]})]}),P?e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"url",children:"URL du mÃ©dia"}),e.jsx(B,{id:"url",name:"url",value:r.url,onChange:m,placeholder:"https://example.com/...",required:!0})]}):F?e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"file-upload",children:"Fichier"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs(o,{htmlFor:"file-upload",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-muted/50 hover:bg-muted/80",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Te,{className:"w-10 h-10 mb-3 text-muted-foreground"}),e.jsxs("p",{className:"mb-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-semibold",children:"Cliquez pour tÃ©lÃ©verser"})," ou glissez-dÃ©posez"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:d?d.name:"Image, PDF, PPT..."})]}),e.jsx(B,{id:"file-upload",type:"file",className:"hidden",onChange:z})]})}),s&&!d&&s.url&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Fichier actuel : ",s.url.split("/").pop()]})]}):null]}),e.jsxs(be,{className:"pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:j,disabled:u,children:"Annuler"}),e.jsxs(y,{type:"submit",disabled:u,children:[u&&e.jsx(se,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrer"]})]})]})})})},Ae=({sheet:s,onEdit:f,onDelete:j,isAdmin:u})=>e.jsx(g.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(T,{className:"h-full flex flex-col group relative",children:[e.jsx(E,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(k,{className:"text-lg leading-tight flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-purple-500"}),s.title]}),e.jsx("div",{className:"mt-1",children:e.jsx(n,{variant:"game",children:s.theme||"Jeu Ã‰ducatif"})})]}),u&&e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(y,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>f(s),children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(y,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>j(s),children:e.jsx(ne,{className:"h-4 w-4 text-destructive"})})]})]})}),e.jsxs(A,{className:"flex-grow grid md:grid-cols-2 gap-6",children:[s.url&&e.jsx("div",{className:"w-full h-48 bg-muted rounded-md overflow-hidden",children:e.jsx("img",{src:s.url,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:`space-y-4 ${s.url?"":"md:col-span-2"}`,children:[s.starting_situation&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Situation de dÃ©part"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.starting_situation})]}),s.game_goal&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"But du jeu"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.game_goal})]}),s.evolution&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Ã‰volution"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.evolution})]}),s.skill_to_develop&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"CapacitÃ© Ã  dÃ©velopper"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.skill_to_develop})]}),s.success_criteria&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"CritÃ¨res de rÃ©ussite"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.success_criteria})]}),s.remarks&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Remarques"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.remarks})]})]})]})]})}),ee=({sheet:s,onEdit:f,onDelete:j,isAdmin:u})=>{const v=()=>{switch(s.type){case"video_url":return e.jsx(Se,{className:"w-8 h-8 text-red-500"});case"image_file":return e.jsx(Ce,{className:"w-8 h-8 text-blue-500"});case"document_file":case"document_url":return e.jsx(O,{className:"w-8 h-8 text-green-500"});default:return e.jsx(Y,{className:"w-8 h-8 text-gray-500"})}},r=()=>{var d;if(s.thumbnail_url)return s.thumbnail_url;if(s.type==="image_file")return s.url;if(s.type==="video_url"){const N=((d=s.url.split("v=")[1])==null?void 0:d.split("&")[0])||s.url.split("/").pop();if(s.url.includes("youtube.com")||s.url.includes("youtu.be"))return`https://img.youtube.com/vi/${N}/mqdefault.jpg`}return null},p=()=>{switch(s.sheet_type){case"educational_game":return e.jsx(te,{className:"w-4 h-4"});case"warm_up_exercise":return e.jsx(re,{className:"w-4 h-4"});case"strength_exercise":return e.jsx(le,{className:"w-4 h-4"});case"review_sheet":return e.jsx(ie,{className:"w-4 h-4"});case"meeting_report":return e.jsx(O,{className:"w-4 h-4"});default:return null}};return s.sheet_type==="educational_game"?e.jsx(Ae,{sheet:s,onEdit:f,onDelete:j,isAdmin:u}):e.jsx(g.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(T,{className:"h-full flex flex-col group relative",children:[e.jsxs(E,{className:"flex-row items-start gap-4",children:[r()?e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:r(),alt:s.title,className:"w-32 h-20 object-cover rounded-md"})}):e.jsx("div",{className:"w-32 h-20 flex items-center justify-center bg-muted rounded-md",children:v()}),e.jsxs("div",{className:"flex-1",children:[e.jsx(k,{className:"text-lg leading-tight",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[s.sheet_type&&e.jsxs(n,{variant:"outline",className:"flex items-center gap-1",children:[p()," ",de[s.sheet_type]]}),s.structure&&e.jsx(n,{variant:"secondary",children:s.structure}),(s.categories||[]).map(d=>e.jsx(n,{children:d},d))]})]}),u&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(y,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>f(s),children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(y,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>j(s),children:e.jsx(ne,{className:"h-4 w-4 text-destructive"})})]})]}),e.jsx(A,{className:"flex-grow",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})}),e.jsx(we,{children:e.jsx(y,{asChild:!0,variant:"link",className:"p-0 h-auto",children:e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:["Ouvrir le mÃ©dia ",e.jsx(Y,{className:"ml-2 h-4 w-4"})]})})})]})})},Ie=()=>{const[s,f]=h.useState([]),[j,u]=h.useState(!0),{isAdmin:v}=ue(),{toast:r}=xe(),[p,d]=h.useState(!1),[N,m]=h.useState(null),[L,D]=h.useState(!1),C=he(),S=h.useCallback(async()=>{u(!0);const{data:a,error:i}=await _.from("pedagogy_sheets").select("*").order("created_at",{ascending:!1});i?r({title:"Erreur",description:"Impossible de charger les fiches pÃ©dagogiques.",variant:"destructive"}):f(a),u(!1)},[r]);h.useEffect(()=>{S()},[S]);const z=async(a,i)=>{D(!0);let t={...a};try{if(i&&(t.type==="image_file"||t.type==="document_file")){const l=i.name.split(".").pop(),c=`${Date.now()}.${l}`,{error:x}=await _.storage.from(Z).upload(c,i,{upsert:!0});if(x)if(x.message.includes("Bucket not found")){r({title:"Erreur de configuration",description:"Le bucket de stockage n'a pas Ã©tÃ© trouvÃ©. Tentative de rÃ©paration...",variant:"destructive"}),C("/setup");return}else throw x;const{data:I}=_.storage.from(Z).getPublicUrl(c);t.url=I.publicUrl}if(N){const{error:l}=await _.from("pedagogy_sheets").update(t).eq("id",N.id);if(l)throw l;r({title:"Fiche modifiÃ©e",description:"La fiche a Ã©tÃ© mise Ã  jour."})}else{const{error:l}=await _.from("pedagogy_sheets").insert(t);if(l)throw l;r({title:"Fiche ajoutÃ©e",description:"La nouvelle fiche a Ã©tÃ© enregistrÃ©e."})}d(!1),m(null),S()}catch(l){r({title:"Erreur d'enregistrement",description:l.message,variant:"destructive"})}finally{D(!1)}},q=a=>{m(a),d(!0)},P=async a=>{if(window.confirm(`ÃŠtes-vous sÃ»r de vouloir supprimer la fiche "${a.title}" ?`))try{if((a.type==="image_file"||a.type==="document_file")&&a.url){const t=a.url.split("/").pop();await _.storage.from(Z).remove([t])}const{error:i}=await _.from("pedagogy_sheets").delete().eq("id",a.id);if(i)throw i;r({title:"Fiche supprimÃ©e",variant:"destructive"}),S()}catch(i){r({title:"Erreur de suppression",description:i.message,variant:"destructive"})}},{sheetsByType:F,existingThemes:R}=h.useMemo(()=>{const a=s.reduce((t,l)=>{const c=l.sheet_type||"other";return t[c]||(t[c]=[]),t[c].push(l),t},{});if(a.educational_game){const t=a.educational_game.reduce((l,c)=>{const x=c.theme||"Sans thÃ¨me";return l[x]||(l[x]=[]),l[x].push(c),l},{});a.educational_game=t}const i=[...new Set(s.filter(t=>t.sheet_type==="educational_game").map(t=>t.theme).filter(Boolean))];return{sheetsByType:a,existingThemes:i}},[s]);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(pe,{children:[e.jsx("title",{children:"Fiches PÃ©dagogiques - ALJ Escalade Jonage"}),e.jsx("meta",{name:"description",content:"Ressources et supports d'apprentissage pour l'escalade."})]}),e.jsx(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-4xl font-bold headline flex items-center gap-3",children:[e.jsx(Fe,{className:"w-10 h-10 text-primary"}),"Fiches PÃ©dagogiques"]}),v&&e.jsxs(y,{onClick:()=>{m(null),d(!0)},children:[e.jsx(je,{className:"w-4 h-4 mr-2"})," Ajouter une fiche"]})]})}),j?e.jsx("div",{className:"flex justify-center items-center py-16",children:e.jsx(se,{className:"w-12 h-12 animate-spin text-primary"})}):s.length===0?e.jsxs("div",{className:"text-center py-16 bg-muted/30 rounded-lg",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Aucune fiche pÃ©dagogique pour le moment."}),e.jsx("p",{className:"text-muted-foreground mt-2",children:'Cliquez sur "Ajouter une fiche" pour commencer Ã  crÃ©er votre bibliothÃ¨que.'})]}):e.jsx(e.Fragment,{children:e.jsxs(K,{defaultValue:"educational_game",className:"w-full",children:[e.jsx(W,{className:"grid grid-cols-2 md:grid-cols-4 w-full h-auto p-1",children:Object.entries(X).map(([a,i])=>{if(a==="passeports"){const c=i.icon;return e.jsxs(M,{value:a,className:"flex flex-col items-center gap-1 h-auto py-3 px-2 text-center min-h-[4rem]",children:[e.jsx(c,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"text-xs leading-tight",children:i.label}),e.jsx(n,{variant:"secondary",className:"text-xs",children:"3"})]},a)}const t=a==="educational_game"?Object.values(F[a]||{}).flat().length:(F[a]||[]).length;if(t===0)return null;const l=i.icon;return e.jsxs(M,{value:a,className:"flex flex-col items-center gap-1 h-auto py-3 px-2 text-center min-h-[4rem]",children:[e.jsx(l,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"text-xs leading-tight",children:i.label}),e.jsx(n,{variant:"secondary",className:"text-xs",children:t})]},a)})}),e.jsx(U,{value:"passeports",className:"mt-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Passeports"}),e.jsx("p",{className:"text-muted-foreground",children:"SystÃ¨mes de validation des compÃ©tences FFME"})]})]}),e.jsxs(g.div,{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",initial:{opacity:0},animate:{opacity:1},children:[e.jsx(g.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(T,{className:"h-full cursor-pointer hover:shadow-xl transition-all duration-300 border-2 hover:border-blue-500 bg-gradient-to-br from-blue-50 to-white group",onClick:()=>C("/passeport-guide"),children:[e.jsxs(E,{children:[e.jsxs(k,{className:"flex items-center gap-2 text-xl",children:[e.jsx("span",{className:"text-3xl",children:"âšª"}),e.jsx("span",{className:"group-hover:text-blue-600 transition-colors",children:"Passeport Blanc"})]}),e.jsx(J,{children:"Je grimpe en moulinette en autonomie sur SAE"})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(n,{variant:"outline",className:"text-sm",children:"39 compÃ©tences"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Validation en salle de bloc et voies en moulinette. Test de prise en charge et assurage."}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("p",{className:"text-xs font-semibold text-primary",children:"Modules :"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsx(n,{variant:"secondary",className:"text-xs",children:"Ã‰co-responsabilitÃ©"}),e.jsx(n,{variant:"secondary",className:"text-xs",children:"Bloc"}),e.jsx(n,{variant:"secondary",className:"text-xs",children:"DifficultÃ©"}),e.jsx(n,{variant:"secondary",className:"text-xs",children:"SÃ©curitÃ©"})]})]})]})]})}),e.jsx(g.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(T,{className:"h-full cursor-pointer hover:shadow-xl transition-all duration-300 border-2 hover:border-yellow-500 bg-gradient-to-br from-yellow-50 to-white group",onClick:()=>C("/passeport-guide"),children:[e.jsxs(E,{children:[e.jsxs(k,{className:"flex items-center gap-2 text-xl",children:[e.jsx("span",{className:"text-3xl",children:"ðŸŸ¡"}),e.jsx("span",{className:"group-hover:text-yellow-600 transition-colors",children:"Passeport Jaune"})]}),e.jsx(J,{children:"Je grimpe en tÃªte sur SAE"})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(n,{variant:"outline",className:"text-sm",children:"38 compÃ©tences"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Validation en salle de bloc (niveau 4a) et voies en tÃªte (niveau 5b). Test de prise en charge."}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("p",{className:"text-xs font-semibold text-primary",children:"Modules :"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsx(n,{variant:"secondary",className:"text-xs",children:"Ã‰co-responsabilitÃ©"}),e.jsx(n,{variant:"secondary",className:"text-xs",children:"Bloc"}),e.jsx(n,{variant:"secondary",className:"text-xs",children:"DifficultÃ©"}),e.jsx(n,{variant:"secondary",className:"text-xs",children:"SÃ©curitÃ©"})]})]})]})]})}),e.jsx(g.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(T,{className:"h-full cursor-pointer hover:shadow-xl transition-all duration-300 border-2 hover:border-orange-500 bg-gradient-to-br from-orange-50 to-white group",onClick:()=>C("/passeport-guide"),children:[e.jsxs(E,{children:[e.jsxs(k,{className:"flex items-center gap-2 text-xl",children:[e.jsx("span",{className:"text-3xl",children:"ðŸŸ "}),e.jsx("span",{className:"group-hover:text-orange-600 transition-colors",children:"Passeport Orange"})]}),e.jsx(J,{children:"Je grimpe en autonomie sur SAE"})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(n,{variant:"outline",className:"text-sm",children:"30 compÃ©tences"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"MaÃ®trise complÃ¨te de l'autonomie sur SAE incluant la gestion des relais et des techniques avancÃ©es."}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("p",{className:"text-xs font-semibold text-primary",children:"CompÃ©tences :"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsx(n,{variant:"secondary",className:"text-xs",children:"Relais"}),e.jsx(n,{variant:"secondary",className:"text-xs",children:"Assurage"}),e.jsx(n,{variant:"secondary",className:"text-xs",children:"Autonomie"}),e.jsx(n,{variant:"secondary",className:"text-xs",children:"SÃ©curitÃ©"})]})]})]})]})})]})]})}),Object.entries(X).map(([a,i])=>{const t=F[a];if(!t||Array.isArray(t)&&t.length===0||!Array.isArray(t)&&Object.keys(t).length===0)return null;const l=i.icon;return e.jsx(U,{value:a,className:"mt-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:i.label}),e.jsx("p",{className:"text-muted-foreground",children:i.description})]})]}),a==="educational_game"?e.jsxs(K,{defaultValue:Object.keys(t)[0],className:"w-full",children:[e.jsx(W,{className:"w-full justify-start flex-wrap h-auto gap-2 p-2",children:Object.entries(t).map(([c,x])=>e.jsxs(M,{value:c,className:"flex items-center gap-2",children:[e.jsx("span",{children:c}),e.jsx(n,{variant:"outline",className:"text-xs",children:x.length})]},c))}),Object.entries(t).map(([c,x])=>e.jsx(U,{value:c,className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold border-b pb-2",children:c}),e.jsx(V,{children:e.jsx(g.div,{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(I=>e.jsx(ee,{sheet:I,onEdit:q,onDelete:P,isAdmin:v},I.id))})})]})},c))]}):e.jsx(V,{children:e.jsx(g.div,{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>e.jsx(ee,{sheet:c,onEdit:q,onDelete:P,isAdmin:v},c.id))})})]})},a)})]})}),e.jsx(V,{children:p&&v&&e.jsx(ke,{sheet:N,onSave:z,onCancel:()=>{d(!1),m(null)},isSaving:L,existingThemes:R})})]})};export{Ie as default};
