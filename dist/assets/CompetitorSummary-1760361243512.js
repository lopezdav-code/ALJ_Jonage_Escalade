import{a0 as C,u as w,O as _,r as n,t as j,j as e,R as T,U as D,al as d,m as f,B as E,a1 as S,aN as L,aO as P,C as R,b as A,d as B,e as H,F as I,G as M,H as o,J as l,K as O,M as t,Y as q,aP as J,x as g,am as k}from"./index-1760361243512.js";const z={Bloc:"bloc",Difficulté:"difficulte",Vitesse:"vitesse"},G=()=>{const{memberId:c}=C(),N=w(),{toast:m}=_(),[b,x]=n.useState(!0),[s,v]=n.useState(null),[h,y]=n.useState([]),u=n.useCallback(async()=>{if(c){x(!0);try{const{data:a,error:i}=await j.from("members").select("*").eq("id",c).single();if(i)throw i;v(a);const{data:r,error:p}=await j.from("competition_participants").select(`
          ranking,
          competitions (id, name, start_date, location, disciplines, nature)
        `).eq("member_id",c).eq("role","Competiteur").order("start_date",{foreignTable:"competitions",ascending:!1});if(p)throw p;y(r)}catch{m({title:"Erreur",description:"Impossible de charger le résumé du compétiteur.",variant:"destructive"})}finally{x(!1)}}},[c,m]);return n.useEffect(()=>{u()},[u]),b?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(T,{className:"w-12 h-12 animate-spin text-primary"})}):s?e.jsxs("div",{className:"space-y-8",children:[e.jsxs(D,{children:[e.jsxs("title",{children:["Palmarès de ",d(s.first_name,s.last_name,!0)," - ALJ Escalade Jonage"]}),e.jsx("meta",{name:"description",content:`Palmarès et récapitulatif des compétitions pour ${d(s.first_name,s.last_name,!0)}.`})]}),e.jsx(f.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>N(-1),children:e.jsx(S,{})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(L,{member:s,size:"default",className:"w-16 h-16"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold headline flex items-center gap-3",children:[e.jsx(P,{className:"w-10 h-10 text-primary"}),"Palmarès de ",d(s.first_name,s.last_name,!0)]}),e.jsx("p",{className:"text-muted-foreground",children:s.title})]})]})]})}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(R,{children:[e.jsx(A,{children:e.jsx(B,{children:"Récapitulatif des compétitions"})}),e.jsx(H,{children:e.jsxs(I,{children:[e.jsx(M,{children:e.jsxs(o,{children:[e.jsx(l,{children:"Compétition"}),e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Lieu"}),e.jsx(l,{children:"Détails"}),e.jsx(l,{className:"text-right",children:"Classement"})]})}),e.jsx(O,{children:h.length>0?h.map(({competitions:a,ranking:i})=>e.jsxs(o,{children:[e.jsx(t,{className:"font-medium",children:a.name}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4 text-muted-foreground"}),new Date(a.start_date).toLocaleDateString("fr-FR")]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4 text-muted-foreground"}),a.location]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.disciplines.map(r=>e.jsx(g,{variant:z[r]||"default",children:r},r)),a.nature&&e.jsx(g,{variant:"outline",children:a.nature})]})}),e.jsx(t,{className:"text-right font-bold",children:i?e.jsxs("div",{className:"flex items-center justify-end gap-2 text-primary",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{children:i})]}):e.jsx("span",{className:"text-muted-foreground",children:"N/A"})})]},a.id)):e.jsx(o,{children:e.jsx(t,{colSpan:5,className:"text-center text-muted-foreground",children:"Aucune participation à une compétition enregistrée."})})})]})})]})})]}):e.jsx("div",{className:"text-center",children:"Compétiteur non trouvé."})};export{G as default};
