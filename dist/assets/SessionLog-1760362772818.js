import{c as P,r as u,u as re,j as e,C as G,B as _,X as ue,I as w,a as he,m as J,b as ie,d as ne,e as le,L as O,T as U,P as ce,f as xe,g as pe,D as ge,h as je,i as ve,k as fe,l as ye,S as oe,n as K,o as Q,p as W,q as X,s as Y,t as C,A as be,v as _e,w as we,x as Z,y as Ne,z as Se,E as Ce,F as Te,G as ke,H as ee,J as E,K as Ee,M as F,N as Fe,O as Ie,Q as Le,R as se,U as qe,V as Ae,W as De}from"./index-1760362772818.js";import{B as Oe}from"./book-marked-1760362772818.js";import{U as $e}from"./upload-1760362772818.js";import{S as ze}from"./save-1760362772818.js";const Me=P("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Ue=P("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),de=P("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),Pe=P("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Re=({exercise:n,index:h,total:g,onExerciseChange:j,onRemove:o,onMove:d,onImport:f})=>{const[s,p]=u.useState(null),[y,b]=u.useState(n.image_url||null),l=re();u.useEffect(()=>{b(n.image_url),n.image_url&&s&&n.image_url!==URL.createObjectURL(s)&&p(null)},[n.image_url]);const t=(c,S)=>{j(h,{...n,[c]:S})},m=c=>{const S=c.target.files[0];if(S){p(S);const I=URL.createObjectURL(S);b(I),j(h,{...n,newImageFile:S,image_url:I})}},N=()=>{n.pedagogy_sheet_id&&l(`/pedagogy#sheet-${n.pedagogy_sheet_id}`)};return e.jsxs(G,{className:"p-4 relative bg-muted/40",children:[e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx(_,{type:"button",variant:"ghost",size:"icon",onClick:()=>d(h,-1),disabled:h===0,children:e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx(_,{type:"button",variant:"ghost",size:"icon",onClick:()=>d(h,1),disabled:h===g-1,children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx(_,{type:"button",variant:"ghost",size:"icon",onClick:()=>o(h),children:e.jsx(ue,{className:"w-4 h-4 text-destructive"})})]}),e.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-2",children:[e.jsxs(_,{type:"button",variant:"outline",size:"sm",onClick:f,children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"})," Importer"]}),n.pedagogy_sheet_id&&e.jsxs(_,{type:"button",variant:"secondary",size:"sm",onClick:N,title:"Voir la fiche pédagogique",children:[e.jsx(de,{className:"w-4 h-4 mr-2"})," Fiche"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-12",children:[e.jsx(w,{placeholder:"Objectifs opérationnels",value:n.operational_objective||"",onChange:c=>t("operational_objective",c.target.value)}),e.jsx(w,{placeholder:"Situation",value:n.situation||"",onChange:c=>t("situation",c.target.value)}),e.jsx(w,{placeholder:"Organisation Temps/volume",value:n.organisation||"",onChange:c=>t("organisation",c.target.value)}),e.jsx(w,{placeholder:"Consigne",value:n.consigne||"",onChange:c=>t("consigne",c.target.value)}),e.jsx(w,{placeholder:"Temps (ex: 10min)",value:n.time||"",onChange:c=>t("time",c.target.value)}),e.jsx(w,{placeholder:"Critère de réussite",value:n.success_criteria||"",onChange:c=>t("success_criteria",c.target.value)}),e.jsx(w,{placeholder:"Régulation",value:n.regulation||"",onChange:c=>t("regulation",c.target.value)}),e.jsx(w,{placeholder:"Lien support",value:n.support_link||"",onChange:c=>t("support_link",c.target.value)}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 border rounded-md flex items-center justify-center bg-background",children:y?e.jsx("img",{src:y,alt:"Aperçu",className:"w-full h-full object-cover rounded-md"}):e.jsx(he,{className:"w-8 h-8 text-muted-foreground"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("label",{htmlFor:`image-upload-${h}`,children:e.jsx(_,{type:"button",variant:"outline",size:"sm",asChild:!0,className:"cursor-pointer",children:e.jsxs("span",{children:[e.jsx($e,{className:"w-4 h-4 mr-2"}),s?"Changer l'image":"Téléverser une image"]})})}),e.jsx(w,{id:`image-upload-${h}`,type:"file",className:"hidden",accept:"image/*",onChange:m}),n.image_url&&!s&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Image actuelle. Téléversez pour remplacer."})]})]})]})]})},Ve={all:"Toutes les fiches",educational_game:"Jeu éducatif",warm_up_exercise:"Exercice d'échauffement",strength_exercise:"Exercice de renfo",review_sheet:"Fiche de révision"},te=({title:n,options:h,selected:g,onChange:j})=>{const o=()=>{g.length===h.length?j([]):j(h)};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(O,{children:n}),e.jsx(_,{type:"button",variant:"link",size:"sm",onClick:o,className:"p-0 h-auto",children:g.length===h.length?"Tout désélectionner":"Tout sélectionner"})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto rounded-md border p-2 space-y-2",children:h.map(d=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{id:`${n}-${d}`,checked:g.includes(d),onCheckedChange:f=>{const s=f?[...g,d]:g.filter(p=>p!==d);j(s)}}),e.jsx("label",{htmlFor:`${n}-${d}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:d})]},d))})]})},Be=({onSelect:n,onCancel:h})=>{const[g,j]=u.useState([]),[o,d]=u.useState(""),[f,s]=u.useState("all"),[p,y]=u.useState("all");u.useEffect(()=>{(async()=>{const{data:m}=await C.from("pedagogy_sheets").select("*").order("title");j(m||[])})()},[]);const b=u.useMemo(()=>{const t=g.filter(m=>m.sheet_type==="educational_game"&&m.theme).map(m=>m.theme);return["all",...Array.from(new Set(t))]},[g]),l=g.filter(t=>{const m=t.title.toLowerCase().includes(o.toLowerCase()),N=f==="all"||t.sheet_type===f,c=p==="all"||t.theme===p;return m&&N&&c});return e.jsx(ge,{open:!0,onOpenChange:h,children:e.jsxs(je,{className:"sm:max-w-[725px]",children:[e.jsxs(ve,{children:[e.jsx(fe,{children:"Importer depuis une Fiche Pédagogique"}),e.jsx(ye,{children:"Sélectionnez une fiche pour remplir automatiquement l'exercice."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mt-4",children:[e.jsxs("div",{className:"relative md:col-span-1",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(w,{placeholder:"Rechercher une fiche...",className:"pl-10",value:o,onChange:t=>d(t.target.value)})]}),e.jsxs(K,{value:f,onValueChange:s,children:[e.jsx(Q,{children:e.jsx(W,{placeholder:"Filtrer par type"})}),e.jsx(X,{children:Object.entries(Ve).map(([t,m])=>e.jsx(Y,{value:t,children:m},t))})]}),e.jsxs(K,{value:p,onValueChange:y,disabled:b.length<=1,children:[e.jsx(Q,{children:e.jsx(W,{placeholder:"Filtrer par thème"})}),e.jsx(X,{children:b.map(t=>e.jsx(Y,{value:t,children:t==="all"?"Tous les thèmes":t},t))})]})]}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto space-y-2 mt-4 pr-2",children:l.map(t=>e.jsxs("div",{className:"p-3 border rounded-md hover:bg-accent cursor-pointer",onClick:()=>n(t),children:[e.jsx("p",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t.description||t.game_goal})]},t.id))})]})})},He=({session:n,onSave:h,onCancel:g,isSaving:j})=>{const[o,d]=u.useState(n||{date:"",start_time:"18:30",instructors:[],students:[],cycle_objective:"",session_objective:"",equipment:"",comment:"",exercises:[]}),[f,s]=u.useState(!1),[p,y]=u.useState(null),[b,l]=u.useState([]);u.useEffect(()=>{(async()=>{try{const{data:x,error:r}=await C.from("members").select("first_name, last_name").eq("title","Loisir lycée").order("last_name");if(r)throw r;const i=x.map(v=>`${v.first_name} ${v.last_name}`);l(i)}catch{l([])}})()},[]);const t=["David","Magali","Olivier","Clement"],m=a=>{const{name:x,value:r}=a.target;d(i=>({...i,[x]:r}))},N=(a,x)=>{d(r=>({...r,[a]:x}))},c=(a,x)=>{const r=[...o.exercises];r[a]=x,d(i=>({...i,exercises:r}))},S=()=>{d(a=>({...a,exercises:[...a.exercises,{id:`new-${Date.now()}`,operational_objective:"",situation:"",organisation:"",consigne:"",time:"",success_criteria:"",regulation:"",support_link:"",image_url:"",newImageFile:null,pedagogy_sheet_id:null}]}))},I=a=>{const x=o.exercises.filter((r,i)=>i!==a);d(r=>({...r,exercises:x}))},L=(a,x)=>{const r=[...o.exercises],i=a+x;i<0||i>=r.length||([r[a],r[i]]=[r[i],r[a]],d(v=>({...v,exercises:r})))},$=a=>{y(a),s(!0)},R=a=>{const x=[...o.exercises],r=x[p];r.pedagogy_sheet_id=a.id,a.sheet_type==="educational_game"?(r.operational_objective=`Jeu: ${a.title}`,r.situation=a.starting_situation,r.consigne=`But: ${a.game_goal}. Évolution: ${a.evolution}`,r.image_url=a.url,r.support_link=""):(r.operational_objective=a.title,r.situation=a.description,r.consigne="",a.type==="image_file"?(r.image_url=a.url,r.support_link=""):(r.support_link=a.url,r.image_url=a.thumbnail_url||"")),d(i=>({...i,exercises:x})),s(!1),y(null)},V=a=>{a.preventDefault(),h(o)};return e.jsxs(J.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(G,{children:e.jsxs("form",{onSubmit:V,children:[e.jsx(ie,{children:e.jsx(ne,{children:n?"Modifier la séance":"Ajouter une nouvelle séance"})}),e.jsxs(le,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"date",children:"Date du cours"}),e.jsx(w,{id:"date",name:"date",type:"date",value:o.date,onChange:m,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"start_time",children:"Heure de début"}),e.jsx(w,{id:"start_time",name:"start_time",type:"time",value:o.start_time,onChange:m,required:!0})]}),e.jsx(te,{title:"Encadrants",options:t,selected:o.instructors,onChange:a=>N("instructors",a)}),e.jsx(te,{title:"Élèves présents",options:b,selected:o.students,onChange:a=>N("students",a)})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"cycle_objective",children:"Objectif de cycle"}),e.jsx(U,{id:"cycle_objective",name:"cycle_objective",value:o.cycle_objective,onChange:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"session_objective",children:"Objectif de séance"}),e.jsx(U,{id:"session_objective",name:"session_objective",value:o.session_objective,onChange:m})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"equipment",children:"Matériel"}),e.jsx(U,{id:"equipment",name:"equipment",value:o.equipment,onChange:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"comment",children:"Commentaire"}),e.jsx(U,{id:"comment",name:"comment",value:o.comment,onChange:m})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Déroulé de la séance"}),e.jsx("div",{className:"space-y-4",children:o.exercises.map((a,x)=>e.jsx(Re,{exercise:a,index:x,total:o.exercises.length,onExerciseChange:c,onRemove:I,onMove:L,onImport:()=>$(x)},a.id))}),e.jsxs(_,{type:"button",variant:"outline",className:"mt-4",onClick:S,children:[e.jsx(ce,{className:"w-4 h-4 mr-2"})," Ajouter un exercice"]})]})]}),e.jsxs(xe,{className:"flex justify-end gap-2",children:[e.jsx(_,{type:"button",variant:"ghost",onClick:g,disabled:j,children:"Annuler"}),e.jsx(_,{type:"submit",disabled:j,children:j?"Sauvegarde...":e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-4 h-4 mr-2"})," Sauvegarder"]})})]})]})}),f&&e.jsx(Be,{onSelect:R,onCancel:()=>s(!1)})]})},Je=({sessions:n,onEdit:h,onDelete:g,isAdmin:j})=>{const o=re(),d=(s,p)=>{let y=new Date(`1970-01-01T${s}:00`);return p.map(b=>{var N,c;const l=parseInt(((c=(N=b.time)==null?void 0:N.match(/\d+/))==null?void 0:c[0])||"0",10),t=new Date(y.getTime()+l*6e4),m=t.toTimeString().substring(0,5);return y=t,{...b,endTime:m}})},f=s=>{s&&o(`/pedagogy#sheet-${s}`)};return e.jsx(be,{type:"single",collapsible:!0,className:"w-full",children:n.map(s=>{var y,b;const p=d(s.start_time,s.exercises);return e.jsxs(_e,{value:`session-${s.id}`,children:[e.jsx(we,{children:e.jsxs("div",{className:"flex justify-between w-full pr-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold",children:[new Date(s.date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})," - ",s.start_time]}),s.cycles&&e.jsxs(Z,{variant:"outline",className:"text-xs px-2 py-1 border-blue-500 text-blue-700",children:["Cycle: ",s.cycles.name]}),s.cycle_objective&&e.jsx(Z,{variant:"secondary",className:"text-xs px-2 py-1",children:s.cycle_objective})]}),e.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-xs",children:s.session_objective})]})}),e.jsxs(Ne,{className:"space-y-4",children:[j&&e.jsxs("div",{className:"flex justify-end gap-2 mb-4",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>h(s),children:[e.jsx(Se,{className:"w-4 h-4 mr-2"})," Modifier"]}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>g(s.id),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"})," Supprimer"]})]}),s.cycles&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[e.jsxs("p",{className:"font-semibold text-blue-900",children:["Cycle: ",s.cycles.name]}),s.cycles.short_description&&e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:s.cycles.short_description})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Objectif de cycle:"})," ",s.cycle_objective]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Objectif de séance:"})," ",s.session_objective]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Encadrants:"})," ",(y=s.instructors)==null?void 0:y.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Élèves présents:"})," ",(b=s.students)==null?void 0:b.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Matériel:"})," ",s.equipment]}),s.comment&&e.jsxs("p",{children:[e.jsx("strong",{children:"Commentaire:"})," ",s.comment]}),e.jsx("h4",{className:"font-semibold mt-4",children:"Déroulé :"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Te,{children:[e.jsx(ke,{children:e.jsxs(ee,{children:[e.jsx(E,{children:"Fin"}),e.jsx(E,{children:"Temps"}),e.jsx(E,{children:"Objectif Op."}),e.jsx(E,{children:"Situation"}),e.jsx(E,{children:"Organisation"}),e.jsx(E,{children:"Consigne"}),e.jsx(E,{children:"Critère réussite"}),e.jsx(E,{children:"Régulation"}),e.jsx(E,{children:"Support"}),e.jsx(E,{children:"Image"})]})}),e.jsx(Ee,{children:p.map(l=>e.jsxs(ee,{children:[e.jsx(F,{className:"font-mono",children:l.endTime}),e.jsx(F,{children:l.time}),e.jsxs(F,{className:"relative",children:[l.pedagogy_sheet_id&&e.jsx(_,{variant:"ghost",size:"icon",className:"absolute -left-8 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>f(l.pedagogy_sheet_id),title:"Voir la fiche pédagogique",children:e.jsx(de,{className:"w-4 h-4 text-primary"})}),l.operational_objective]}),e.jsx(F,{children:l.situation}),e.jsx(F,{children:l.organisation}),e.jsx(F,{children:l.consigne}),e.jsx(F,{children:l.success_criteria}),e.jsx(F,{children:l.regulation}),e.jsx(F,{children:l.support_link&&e.jsx("a",{href:l.support_link,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:e.jsx(Fe,{className:"w-4 h-4"})})}),e.jsx(F,{children:l.image_url&&e.jsx("a",{href:l.image_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:l.image_url,className:"h-16 w-16 object-cover rounded-md",alt:`Image pour ${l.situation||"exercice"}`})})})]},l.id))})]})})]})]},s.id)})})},ae="exercise_images",Xe=()=>{const[n,h]=u.useState([]),[g,j]=u.useState(!0),[o,d]=u.useState(!1),[f,s]=u.useState(null),[p,y]=u.useState(""),[b,l]=u.useState(!1),{toast:t}=Ie(),{user:m,isAdmin:N,isAdherent:c,loading:S}=Le(),I=!S&&(N||c),L=!S&&N,$=u.useCallback(async()=>{if(!I){j(!1);return}j(!0);const{data:i,error:v}=await C.from("sessions").select(`
        *, 
        exercises (*),
        cycles (
          id,
          name,
          short_description
        )
      `).order("date",{ascending:!1}).order("start_time",{ascending:!1}).order("order",{foreignTable:"exercises",ascending:!0});v?t({title:"Erreur",description:"Impossible de charger les séances.",variant:"destructive"}):h(i.map(A=>({...A,start_time:A.start_time?A.start_time.substring(0,5):"18:30"}))),j(!1)},[t,I]);u.useEffect(()=>{$()},[$]);const R=async i=>{const v=i.name.split(".").pop(),D=`${`${Math.random()}.${v}`}`;let{error:M}=await C.storage.from(ae).upload(D,i);if(M)throw M;const{data:T}=C.storage.from(ae).getPublicUrl(D);return T.publicUrl},V=async i=>{if(L){l(!0);try{const{id:v,exercises:A,...D}=i,M=await Promise.all(A.map(async T=>{let q=T.image_url;T.newImageFile&&(q=await R(T.newImageFile));const{newImageFile:z,...k}=T;return{...k,image_url:q}}));if(f){const{data:T,error:q}=await C.from("sessions").update(D).eq("id",f.id).select().single();if(q)throw q;await C.from("exercises").delete().eq("session_id",T.id);const z=M.map((k,B)=>{const{id:me,...H}=k;return{...H,session_id:T.id,order:B}});if(z.length>0){const{error:k}=await C.from("exercises").insert(z);if(k)throw k}}else{const{data:T,error:q}=await C.from("sessions").insert(D).select().single();if(q)throw q;const z=M.map((k,B)=>{const{id:me,...H}=k;return{...H,session_id:T.id,order:B}});if(z.length>0){const{error:k}=await C.from("exercises").insert(z);if(k)throw k}}t({title:"Séance sauvegardée !",description:"La séance a été enregistrée avec succès."}),d(!1),s(null),$()}catch(v){t({title:"Erreur de sauvegarde",description:v.message,variant:"destructive"})}finally{l(!1)}}},a=i=>{L&&(s(i),d(!0))},x=async i=>{if(L)try{await C.from("exercises").delete().eq("session_id",i);const{error:v}=await C.from("sessions").delete().eq("id",i);if(v)throw v;t({title:"Séance supprimée",description:"La séance a été supprimée avec succès.",variant:"destructive"}),$()}catch(v){t({title:"Erreur de suppression",description:v.message,variant:"destructive"})}},r=u.useMemo(()=>n.filter(i=>{if(!p)return!0;const v=p.toLowerCase();return[i.cycle_objective,i.session_objective,i.comment,...i.instructors||[],...i.students||[],...i.exercises.map(D=>Object.values(D).join(" "))].join(" ").toLowerCase().includes(v)}),[n,p]);return S?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(se,{className:"w-12 h-12 animate-spin text-primary"})}):I?e.jsxs("div",{className:"space-y-8",children:[e.jsxs(qe,{children:[e.jsx("title",{children:"Séances d'entraînement - ALJ Escalade Jonage"}),e.jsx("meta",{name:"description",content:"Consultez et gérez les séances d'escalade du club."})]}),e.jsx(J.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-4xl font-bold headline flex items-center gap-3",children:[e.jsx(Ae,{className:"w-10 h-10 text-primary"}),"Séances d'entraînement"]}),L&&!o&&e.jsxs(_,{onClick:()=>{d(!0),s(null)},children:[e.jsx(ce,{className:"w-4 h-4 mr-2"})," Créer une séance"]})]})}),e.jsx(De,{children:o&&L&&e.jsx(He,{session:f,onSave:V,onCancel:()=>{d(!1),s(null)},isSaving:b},f?f.id:"new")}),e.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs(G,{children:[e.jsxs(ie,{children:[e.jsx(ne,{children:"Historique des séances"}),e.jsxs("div",{className:"relative mt-4",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(w,{placeholder:"Rechercher par objectif, encadrant, élève...",className:"pl-10",value:p,onChange:i=>y(i.target.value)})]})]}),e.jsxs(le,{children:[g?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(se,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsx(Je,{sessions:r,onEdit:a,onDelete:x,isAdmin:L}),!g&&r.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:'Aucune séance trouvée. Cliquez sur "Créer une séance" pour commencer !'})]})]})})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Pe,{className:"w-12 h-12 mx-auto text-muted-foreground"}),e.jsx("h1",{className:"text-2xl font-bold mt-4",children:"Accès restreint"}),e.jsx("p",{className:"text-muted-foreground",children:"Vous devez être un adhérent ou un administrateur pour voir cette page."}),!m&&e.jsx("p",{className:"mt-4",children:"Veuillez vous connecter."})]})};export{Xe as default};
