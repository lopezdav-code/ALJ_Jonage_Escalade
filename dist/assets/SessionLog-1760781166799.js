import{r as p,j as e,I as ge,c as $,X as Ye,C as Qe,a as je,u as Q,b as be,P as F,d as ve,e as We,f as Ce,g as Xe,h as Ze,R as v,i as et,k as tt,l as ye,B as ce,m as M,n as rt,T as st,o as at,p as nt,q as le,s as S,t as ot,v as I,L as ct,w as lt,x as it,y as O,z as ie,A as dt,H as ut,D as de,E as mt,F as pt,G as xt,J as ht,K as ft,S as gt,M as ue,N as me,O as pe,Q as xe,U as he,V,W as jt}from"./index-1760781166799.js";import{L as bt}from"./library-1760781166799.js";import{C as vt}from"./calendar-check-1760781166799.js";const Ct=({value:r,onChange:l,members:s,label:c})=>{const[i,o]=p.useState(!1),[u,t]=p.useState(""),[x,m]=p.useState(-1),f=p.useRef(null),a=p.useRef(null),b=s==null?void 0:s.find(n=>n.id===r),j=(s||[]).filter(n=>u?`${n.first_name} ${n.last_name}`.toLowerCase().includes(u.toLowerCase()):!0);p.useEffect(()=>{const n=h=>{f.current&&!f.current.contains(h.target)&&o(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const w=n=>{l(n.id),t(""),o(!1),m(-1)},C=()=>{l(null),t(""),o(!1)},N=()=>{o(!0),t("")},y=n=>{if(!i){(n.key==="Enter"||n.key==="ArrowDown")&&(o(!0),n.preventDefault());return}switch(n.key){case"ArrowDown":n.preventDefault(),m(h=>h<j.length-1?h+1:h);break;case"ArrowUp":n.preventDefault(),m(h=>h>0?h-1:-1);break;case"Enter":n.preventDefault(),x>=0&&x<j.length&&w(j[x]);break;case"Escape":o(!1),t(""),m(-1);break}};return e.jsxs("div",{className:"space-y-2",ref:f,children:[c&&e.jsx("label",{className:"text-sm font-medium",children:c}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ge,{ref:a,type:"text",placeholder:b?`${b.first_name} ${b.last_name}`:"Rechercher un encadrant...",value:u,onChange:n=>{t(n.target.value),o(!0),m(-1)},onClick:N,onKeyDown:y,className:$("pr-8",b&&!u&&"font-medium")}),b&&!u&&e.jsx("button",{type:"button",onClick:C,className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:e.jsx(Ye,{className:"h-4 w-4"})})]})}),i&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-popover border rounded-md shadow-md max-h-64 overflow-y-auto",children:j.length===0?e.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:"Aucun encadrant trouvÃ©."}):j.map((n,h)=>{const E=`${n.first_name} ${n.last_name}`,T=r===n.id,k=x===h;return e.jsxs("div",{className:$("px-3 py-2 cursor-pointer flex items-center gap-2 text-sm",k&&"bg-accent",T&&"font-medium"),onClick:()=>w(n),onMouseEnter:()=>m(h),children:[e.jsx(Qe,{className:$("h-4 w-4",T?"opacity-100":"opacity-0")}),e.jsx("span",{children:E})]},n.id)})})]})]})};var z="Collapsible",[yt,Ne]=je(z),[Nt,W]=yt(z),we=p.forwardRef((r,l)=>{const{__scopeCollapsible:s,open:c,defaultOpen:i,disabled:o,onOpenChange:u,...t}=r,[x,m]=Q({prop:c,defaultProp:i??!1,onChange:u,caller:z});return e.jsx(Nt,{scope:s,disabled:o,contentId:be(),open:x,onOpenToggle:p.useCallback(()=>m(f=>!f),[m]),children:e.jsx(F.div,{"data-state":Z(x),"data-disabled":o?"":void 0,...t,ref:l})})});we.displayName=z;var _e="CollapsibleTrigger",Ae=p.forwardRef((r,l)=>{const{__scopeCollapsible:s,...c}=r,i=W(_e,s);return e.jsx(F.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Z(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...c,ref:l,onClick:ve(r.onClick,i.onOpenToggle)})});Ae.displayName=_e;var X="CollapsibleContent",Se=p.forwardRef((r,l)=>{const{forceMount:s,...c}=r,i=W(X,r.__scopeCollapsible);return e.jsx(We,{present:s||i.open,children:({present:o})=>e.jsx(wt,{...c,ref:l,present:o})})});Se.displayName=X;var wt=p.forwardRef((r,l)=>{const{__scopeCollapsible:s,present:c,children:i,...o}=r,u=W(X,s),[t,x]=p.useState(c),m=p.useRef(null),f=Ce(l,m),a=p.useRef(0),b=a.current,j=p.useRef(0),w=j.current,C=u.open||t,N=p.useRef(C),y=p.useRef(void 0);return p.useEffect(()=>{const n=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(n)},[]),Xe(()=>{const n=m.current;if(n){y.current=y.current||{transitionDuration:n.style.transitionDuration,animationName:n.style.animationName},n.style.transitionDuration="0s",n.style.animationName="none";const h=n.getBoundingClientRect();a.current=h.height,j.current=h.width,N.current||(n.style.transitionDuration=y.current.transitionDuration,n.style.animationName=y.current.animationName),x(c)}},[u.open,c]),e.jsx(F.div,{"data-state":Z(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!C,...o,ref:f,style:{"--radix-collapsible-content-height":b?`${b}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...r.style},children:C&&i})});function Z(r){return r?"open":"closed"}var _t=we,At=Ae,St=Se,A="Accordion",It=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ee,Tt,Rt]=Ze(A),[q,Kt]=je(A,[Rt,Ne]),te=Ne(),Ie=v.forwardRef((r,l)=>{const{type:s,...c}=r,i=c,o=c;return e.jsx(ee.Provider,{scope:r.__scopeAccordion,children:s==="multiple"?e.jsx(Dt,{...o,ref:l}):e.jsx(Pt,{...i,ref:l})})});Ie.displayName=A;var[Te,Et]=q(A),[Re,kt]=q(A,{collapsible:!1}),Pt=v.forwardRef((r,l)=>{const{value:s,defaultValue:c,onValueChange:i=()=>{},collapsible:o=!1,...u}=r,[t,x]=Q({prop:s,defaultProp:c??"",onChange:i,caller:A});return e.jsx(Te,{scope:r.__scopeAccordion,value:v.useMemo(()=>t?[t]:[],[t]),onItemOpen:x,onItemClose:v.useCallback(()=>o&&x(""),[o,x]),children:e.jsx(Re,{scope:r.__scopeAccordion,collapsible:o,children:e.jsx(Ee,{...u,ref:l})})})}),Dt=v.forwardRef((r,l)=>{const{value:s,defaultValue:c,onValueChange:i=()=>{},...o}=r,[u,t]=Q({prop:s,defaultProp:c??[],onChange:i,caller:A}),x=v.useCallback(f=>t((a=[])=>[...a,f]),[t]),m=v.useCallback(f=>t((a=[])=>a.filter(b=>b!==f)),[t]);return e.jsx(Te,{scope:r.__scopeAccordion,value:u,onItemOpen:x,onItemClose:m,children:e.jsx(Re,{scope:r.__scopeAccordion,collapsible:!0,children:e.jsx(Ee,{...o,ref:l})})})}),[Ot,K]=q(A),Ee=v.forwardRef((r,l)=>{const{__scopeAccordion:s,disabled:c,dir:i,orientation:o="vertical",...u}=r,t=v.useRef(null),x=Ce(t,l),m=Tt(s),a=et(i)==="ltr",b=ve(r.onKeyDown,j=>{var P;if(!It.includes(j.key))return;const w=j.target,C=m().filter(R=>{var D;return!((D=R.ref.current)!=null&&D.disabled)}),N=C.findIndex(R=>R.ref.current===w),y=C.length;if(N===-1)return;j.preventDefault();let n=N;const h=0,E=y-1,T=()=>{n=N+1,n>E&&(n=h)},k=()=>{n=N-1,n<h&&(n=E)};switch(j.key){case"Home":n=h;break;case"End":n=E;break;case"ArrowRight":o==="horizontal"&&(a?T():k());break;case"ArrowDown":o==="vertical"&&T();break;case"ArrowLeft":o==="horizontal"&&(a?k():T());break;case"ArrowUp":o==="vertical"&&k();break}const L=n%y;(P=C[L].ref.current)==null||P.focus()});return e.jsx(Ot,{scope:s,disabled:c,direction:i,orientation:o,children:e.jsx(ee.Slot,{scope:s,children:e.jsx(F.div,{...u,"data-orientation":o,ref:x,onKeyDown:c?void 0:b})})})}),H="AccordionItem",[$t,re]=q(H),ke=v.forwardRef((r,l)=>{const{__scopeAccordion:s,value:c,...i}=r,o=K(H,s),u=Et(H,s),t=te(s),x=be(),m=c&&u.value.includes(c)||!1,f=o.disabled||r.disabled;return e.jsx($t,{scope:s,open:m,disabled:f,triggerId:x,children:e.jsx(_t,{"data-orientation":o.orientation,"data-state":Be(m),...t,...i,ref:l,disabled:f,open:m,onOpenChange:a=>{a?u.onItemOpen(c):u.onItemClose(c)}})})});ke.displayName=H;var Pe="AccordionHeader",De=v.forwardRef((r,l)=>{const{__scopeAccordion:s,...c}=r,i=K(A,s),o=re(Pe,s);return e.jsx(F.h3,{"data-orientation":i.orientation,"data-state":Be(o.open),"data-disabled":o.disabled?"":void 0,...c,ref:l})});De.displayName=Pe;var Y="AccordionTrigger",Oe=v.forwardRef((r,l)=>{const{__scopeAccordion:s,...c}=r,i=K(A,s),o=re(Y,s),u=kt(Y,s),t=te(s);return e.jsx(ee.ItemSlot,{scope:s,children:e.jsx(At,{"aria-disabled":o.open&&!u.collapsible||void 0,"data-orientation":i.orientation,id:o.triggerId,...t,...c,ref:l})})});Oe.displayName=Y;var $e="AccordionContent",Le=v.forwardRef((r,l)=>{const{__scopeAccordion:s,...c}=r,i=K(A,s),o=re($e,s),u=te(s);return e.jsx(St,{role:"region","aria-labelledby":o.triggerId,"data-orientation":i.orientation,...u,...c,ref:l,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...r.style}})});Le.displayName=$e;function Be(r){return r?"open":"closed"}var Lt=Ie,Bt=ke,Mt=De,Me=Oe,Fe=Le;const Ft=Lt,Ve=v.forwardRef(({className:r,...l},s)=>e.jsx(Bt,{ref:s,className:$("border-b",r),...l}));Ve.displayName="AccordionItem";const He=v.forwardRef(({className:r,children:l,...s},c)=>e.jsx(Mt,{className:"flex",children:e.jsxs(Me,{ref:c,className:$("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",r),...s,children:[l,e.jsx(tt,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));He.displayName=Me.displayName;const ze=v.forwardRef(({className:r,children:l,...s},c)=>e.jsx(Fe,{ref:c,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:e.jsx("div",{className:$("pb-4 pt-0",r),children:l})}));ze.displayName=Fe.displayName;const J=[{badgeBorder:"border-green-500",badgeText:"text-green-700",boxBg:"bg-green-50",boxBorder:"border-green-200",title:"text-green-900",desc:"text-green-700"},{badgeBorder:"border-blue-500",badgeText:"text-blue-700",boxBg:"bg-blue-50",boxBorder:"border-blue-200",title:"text-blue-900",desc:"text-blue-700"},{badgeBorder:"border-purple-500",badgeText:"text-purple-700",boxBg:"bg-purple-50",boxBorder:"border-purple-200",title:"text-purple-900",desc:"text-purple-700"},{badgeBorder:"border-orange-500",badgeText:"text-orange-700",boxBg:"bg-orange-50",boxBorder:"border-orange-200",title:"text-orange-900",desc:"text-orange-700"},{badgeBorder:"border-teal-500",badgeText:"text-teal-700",boxBg:"bg-teal-50",boxBorder:"border-teal-200",title:"text-teal-900",desc:"text-teal-700"},{badgeBorder:"border-red-500",badgeText:"text-red-700",boxBg:"bg-red-50",boxBorder:"border-red-200",title:"text-red-900",desc:"text-red-700"}],fe=r=>{if(!r)return J[1];const l=String(r).split("").reduce((s,c)=>s+c.charCodeAt(0),0);return J[l%J.length]},Vt=({sessions:r,onEdit:l,onDelete:s,isAdmin:c})=>{const i=ye(),o=(t,x)=>{let m=new Date(`1970-01-01T${t}:00`);return x.map(f=>{var w,C;const a=parseInt(((C=(w=f.time)==null?void 0:w.match(/\d+/))==null?void 0:C[0])||"0",10),b=new Date(m.getTime()+a*6e4),j=b.toTimeString().substring(0,5);return m=b,{...f,endTime:j}})},u=t=>{t&&i(`/pedagogy#sheet-${t}`)};return e.jsx(Ft,{type:"single",collapsible:!0,className:"w-full",children:r.map(t=>{var m,f;const x=o(t.start_time,t.exercises);return e.jsxs(Ve,{value:`session-${t.id}`,children:[e.jsx(He,{onClick:a=>{a.stopPropagation(),i(`/session-log/${t.id}`)},children:e.jsxs("div",{className:"flex justify-between w-full pr-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"font-semibold",children:t.date?`${new Date(t.date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})} - ${t.start_time}`:"SÃ©ance sans date"}),t.cycles&&(()=>{const a=fe(t.cycles.id);return e.jsxs(ce,{variant:"outline",className:`text-xs px-2 py-1 ${a.badgeBorder} ${a.badgeText}`,children:["Cycle: ",t.cycles.name]})})(),t.schedule&&e.jsxs(ce,{variant:"outline",className:"text-xs px-2 py-1 border-purple-500 text-purple-700",children:[t.schedule.type," - ",t.schedule.age_category]})]}),e.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-xs",children:t.session_objective})]})}),e.jsxs(ze,{className:"space-y-4",children:[c&&e.jsxs("div",{className:"flex justify-end gap-2 mb-4",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>l(t),children:[e.jsx(rt,{className:"w-4 h-4 mr-2"})," Modifier"]}),e.jsxs(M,{variant:"destructive",size:"sm",onClick:()=>s(t.id),children:[e.jsx(st,{className:"w-4 h-4 mr-2"})," Supprimer"]})]}),t.cycles&&(()=>{const a=fe(t.cycles.id);return e.jsxs("div",{className:`${a.boxBg} border ${a.boxBorder} rounded-lg p-3 mb-4`,children:[e.jsxs("p",{className:`font-semibold ${a.title}`,children:["Cycle: ",t.cycles.name]}),t.cycles.short_description&&e.jsx("p",{className:`text-sm ${a.desc} mt-1`,children:t.cycles.short_description})]})})(),t.schedule&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 mb-4",children:[e.jsxs("p",{className:"font-semibold text-purple-900",children:["Emploi du temps: ",t.schedule.type," - ",t.schedule.age_category]}),e.jsxs("p",{className:"text-sm text-purple-700 mt-1",children:[t.schedule.day," de ",t.schedule.start_time," Ã  ",t.schedule.end_time]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Objectif de sÃ©ance:"})," ",t.session_objective]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Encadrants:"})," ",(m=t.instructorNames)==null?void 0:m.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ÃlÃ¨ves prÃ©sents:"})," ",(f=t.studentNames)==null?void 0:f.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"MatÃ©riel:"})," ",t.equipment]}),t.comment&&e.jsxs("p",{children:[e.jsx("strong",{children:"Commentaire:"})," ",t.comment]}),e.jsx("h4",{className:"font-semibold mt-4",children:"DÃ©roulÃ© :"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(at,{children:[e.jsx(nt,{children:e.jsxs(le,{children:[e.jsx(S,{children:"Fin"}),e.jsx(S,{children:"Temps"}),e.jsx(S,{children:"Objectif Op."}),e.jsx(S,{children:"Situation"}),e.jsx(S,{children:"Organisation"}),e.jsx(S,{children:"Consigne"}),e.jsx(S,{children:"CritÃ¨re rÃ©ussite"}),e.jsx(S,{children:"RÃ©gulation"}),e.jsx(S,{children:"Support"}),e.jsx(S,{children:"Image"})]})}),e.jsx(ot,{children:x.map(a=>e.jsxs(le,{children:[e.jsx(I,{className:"font-mono",children:a.endTime}),e.jsx(I,{children:a.time}),e.jsxs(I,{className:"relative",children:[a.pedagogy_sheet_id&&e.jsx(M,{variant:"ghost",size:"icon",className:"absolute -left-8 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>u(a.pedagogy_sheet_id),title:"Voir la fiche pÃ©dagogique",children:e.jsx(bt,{className:"w-4 h-4 text-primary"})}),a.operational_objective]}),e.jsx(I,{children:a.situation}),e.jsx(I,{children:a.organisation}),e.jsx(I,{children:a.consigne}),e.jsx(I,{children:a.success_criteria}),e.jsx(I,{children:a.regulation}),e.jsx(I,{children:a.support_link&&e.jsx("a",{href:a.support_link,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:e.jsx(ct,{className:"w-4 h-4"})})}),e.jsx(I,{children:a.image_url&&e.jsx("a",{href:a.image_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:a.image_url,className:"h-16 w-16 object-cover rounded-md",alt:`Image pour ${a.situation||"exercice"}`})})})]},a.id))})]})})]})]},t.id)})})},Gt=()=>{const r=ye(),[l,s]=p.useState([]),[c,i]=p.useState([]),[o,u]=p.useState([]),[t,x]=p.useState([]),[m,f]=p.useState(""),[a,b]=p.useState(""),[j,w]=p.useState(null),[C,N]=p.useState(!0),[y,n]=p.useState(""),{toast:h}=lt(),{user:E,isAdmin:T,isAdherent:k,loading:L}=it(),P=!L&&(T||k),R=!L&&T,D=p.useCallback(async()=>{if(!P){N(!1);return}N(!0);const{data:d,error:_}=await O.from("sessions").select(`
        *, 
        exercises (*),
        cycles (
          id,
          name,
          short_description
        )
      `).order("date",{ascending:!1,nullsFirst:!0}).order("start_time",{ascending:!1,nullsFirst:!0}).order("order",{foreignTable:"exercises",ascending:!0});console.log("DonnÃ©es rÃ©cupÃ©rÃ©es pour les sÃ©ances :",d),_?h({title:"Erreur",description:"Impossible de charger les sÃ©ances.",variant:"destructive"}):s(d.map(g=>({...g,start_time:g.start_time?g.start_time.substring(0,5):"18:30"}))),N(!1)},[h,P]),qe=p.useCallback(async()=>{try{const{data:d}=await O.from("cycles").select("id, name").order("name");i(d||[]);const{data:_}=await O.from("schedules").select("id, type, age_category, day, start_time").order("day, start_time");u(_||[]);const{data:g}=await O.from("secure_members").select("id, first_name, last_name").order("last_name, first_name");x(g||[])}catch(d){console.error("Erreur lors du chargement des options de filtre:",d)}},[]);p.useEffect(()=>{D(),qe()},[D]);const Ke=d=>{R&&r(`/session-log/edit/${d.id}`)},Ge=async d=>{if(R)try{await O.from("exercises").delete().eq("session_id",d);const{error:_}=await O.from("sessions").delete().eq("id",d);if(_)throw _;h({title:"SÃ©ance supprimÃ©e",description:"La sÃ©ance a Ã©tÃ© supprimÃ©e avec succÃ¨s.",variant:"destructive"}),D()}catch(_){h({title:"Erreur de suppression",description:_.message,variant:"destructive"})}},se=p.useMemo(()=>{const d=y.toLowerCase(),_=l.filter(g=>{var ae,ne;if(!g.date||y&&![((ae=g.cycles)==null?void 0:ae.name)||"",((ne=g.cycles)==null?void 0:ne.short_description)||"",g.session_objective||"",g.comment||"",...(g.instructors||[]).map(String),...(g.students||[]).map(String),...g.exercises.map(B=>Object.values(B).join(" "))].join(" ").toLowerCase().includes(d)||m&&(!g.cycles||String(g.cycles.id)!==String(m))||a&&(!g.schedule_id||String(g.schedule_id)!==String(a)))return!1;if(j){const G=j,B=t.find(U=>String(U.id)===String(G)),oe=B?`${B.first_name} ${B.last_name}`:null,Ue=g.instructors&&g.instructors.some(U=>String(U)===String(G)),Je=oe&&g.instructorNames&&g.instructorNames.includes(oe);if(!Ue&&!Je)return!1}return!0});return console.log("SÃ©ances aprÃ¨s filtrage :",_),_},[l,y,m,a,j,t]);return L?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(ie,{className:"w-12 h-12 animate-spin text-primary"})}):P?e.jsxs("div",{className:"space-y-8",children:[e.jsxs(ut,{children:[e.jsx("title",{children:"SÃ©ances d'entraÃ®nement - ALJ Escalade Jonage"}),e.jsx("meta",{name:"description",content:"Consultez et gÃ©rez les sÃ©ances d'escalade du club."})]}),e.jsx(de.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-4xl font-bold headline flex items-center gap-3",children:[e.jsx(mt,{className:"w-10 h-10 text-primary"}),"SÃ©ances d'entraÃ®nement"]}),e.jsxs("div",{className:"flex gap-2",children:[R&&e.jsxs(M,{variant:"outline",onClick:()=>r("/attendance-recap"),children:[e.jsx(vt,{className:"w-4 h-4 mr-2"})," RÃ©capitulatif de PrÃ©sence"]}),R&&e.jsxs(M,{onClick:()=>r("/session-log/new"),children:[e.jsx(pt,{className:"w-4 h-4 mr-2"})," CrÃ©er une sÃ©ance"]})]})]})}),e.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs(xt,{children:[e.jsxs(ht,{children:[e.jsx(ft,{children:"Historique des sÃ©ances"}),e.jsxs("div",{className:"relative mt-4",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(ge,{placeholder:"Rechercher par objectif, encadrant, Ã©lÃ¨ve...",className:"pl-10",value:y,onChange:d=>n(d.target.value)})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"filterCycle",children:"Filtrer par cycle"}),e.jsxs(me,{value:m,onValueChange:d=>f(d),children:[e.jsx(pe,{id:"filterCycle",children:e.jsx(xe,{placeholder:"Tous les cycles"})}),e.jsxs(he,{children:[e.jsx(V,{value:"",children:"Tous les cycles"}),c.map(d=>e.jsx(V,{value:d.id,children:d.name},d.id))]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"filterSchedule",children:"Filtrer par emploi du temps"}),e.jsxs(me,{value:a,onValueChange:d=>b(d),children:[e.jsx(pe,{id:"filterSchedule",children:e.jsx(xe,{placeholder:"Tous les emplois"})}),e.jsxs(he,{children:[e.jsx(V,{value:"",children:"Tous les emplois"}),o.map(d=>e.jsx(V,{value:d.id,children:`${d.type} / ${d.age_category} / ${d.day} ${d.start_time}`},d.id))]})]})]}),e.jsx("div",{children:e.jsx(Ct,{value:j,onChange:d=>w(d),members:t,label:"Filtrer par encadrant"})})]})]}),e.jsxs(jt,{children:[C?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(ie,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsx(Vt,{sessions:se,onEdit:Ke,onDelete:Ge,isAdmin:R}),!C&&se.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:'Aucune sÃ©ance trouvÃ©e. Cliquez sur "CrÃ©er une sÃ©ance" pour commencer !'})]})]})})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(dt,{className:"w-12 h-12 mx-auto text-muted-foreground"}),e.jsx("h1",{className:"text-2xl font-bold mt-4",children:"AccÃ¨s restreint"}),e.jsx("p",{className:"text-muted-foreground",children:"Vous devez Ãªtre un adhÃ©rent ou un administrateur pour voir cette page."}),!E&&e.jsx("p",{className:"mt-4",children:"Veuillez vous connecter."})]})};export{Gt as default};
