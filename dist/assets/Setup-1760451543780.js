import{l,u as g,r as n,j as o,n as m,s as u}from"./index-1760451543780.js";const e="pedagogy_files",x=()=>{const{toast:a}=l(),c=g(),[d,t]=n.useState("Initialisation de la configuration...");return n.useEffect(()=>{(async()=>{try{t(`Vérification du bucket de stockage '${e}'...`);const{data:s,error:i}=await u.storage.listBuckets();if(i)throw new Error(`Erreur lors de la récupération des buckets: ${i.message}`);if(s.some(r=>r.name===e))t(`Le bucket '${e}' existe déjà. Aucune action requise.`);else{t(`Le bucket '${e}' n'existe pas. Création en cours...`);const{error:r}=await u.storage.createBucket(e,{public:!0});if(r)throw new Error(`Erreur lors de la création du bucket: ${r.message}`);t(`Bucket '${e}' créé avec succès.`),a({title:"Configuration terminée",description:`Le bucket de stockage '${e}' a été créé.`})}t("Configuration terminée. Redirection..."),setTimeout(()=>c("/pedagogy"),2e3)}catch(s){console.error("Setup error:",s),t(`Erreur de configuration: ${s.message}`),a({title:"Erreur de configuration",description:s.message,variant:"destructive"})}})()},[a,c]),o.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[o.jsx(m,{className:"w-12 h-12 animate-spin text-primary mb-4"}),o.jsx("p",{className:"text-lg text-muted-foreground",children:d})]})};export{x as default};
